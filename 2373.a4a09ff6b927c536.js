"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2373],{2373:(M,m,r)=>{r.r(m),r.d(m,{ProfilePageModule:()=>C});var d=r(2200),s=r(4341),n=r(7343),u=r(8132),t=r(3664),c=r(2615),p=r(3944);function b(a,o){if(1&a){const g=t.RV6();t.j41(0,"ion-button",24),t.bIt("click",function(){c.eBV(g);const e=t.XpG();return c.Njj(e.togleEdit())}),t.nrm(1,"ion-icon",25),t.k0s()}}function f(a,o){if(1&a){const g=t.RV6();t.j41(0,"ion-button",26),t.bIt("click",function(){c.eBV(g);const e=t.XpG();return c.Njj(e.saveProfile())}),t.nrm(1,"ion-icon",27),t.k0s()}if(2&a){const g=t.XpG();t.Y8G("disabled",g.profileForm.invalid)}}const h=[{path:"",component:(()=>{var a;class o{constructor(i,e){this.fb=i,this.userService=e,this.isEditing=!1,this.userData={},this.profileForm=this.fb.group({username:["",[s.k0.required,s.k0.minLength(3)]],image:[""]}),this.profileForm.disable()}ngOnInit(){}ionViewWillEnter(){this.loadUserData()}loadUserData(){this.userService.getCurrentUser().subscribe(i=>{i&&i.data?(this.userData=i.data,this.profileForm.patchValue({username:this.userData.username,image:this.userData.image})):this.profileForm.reset()})}saveProfile(){this.profileForm.valid&&this.userService.updateUser(this.profileForm.value).subscribe({next:e=>{console.log("Usuario actualizado y cach\xe9 limpia"),this.togleEdit(),this.loadUserData()},error:e=>console.error("Error al guardar",e)})}togleEdit(){this.isEditing=!this.isEditing,this.isEditing?this.profileForm.enable():this.profileForm.disable()}resetForm(){this.profileForm.patchValue({username:this.userData.username,image:this.userData.image}),this.isEditing&&this.togleEdit()}static#t=a=()=>(this.\u0275fac=function(e){return new(e||o)(t.rXU(s.ok),t.rXU(p.D))},this.\u0275cmp=t.VBU({type:o,selectors:[["app-profile"]],standalone:!1,decls:48,vars:13,consts:[[3,"translucent"],[1,"game-toolbar"],["slot","start"],["defaultHref","/"],["slot","end"],[3,"disabled"],[1,"game-background",3,"fullscreen"],[1,"profile-container"],[1,"avatar-section","glass-effect"],[1,"game-avatar"],["onerror","this.src='https://ionicframework.com/docs/img/demos/avatar.svg'",3,"src"],[1,"username-display"],[1,"game-list","glass-effect",3,"inset"],[1,"list-header-label"],["lines","none",1,"read-only-item"],["name","mail-outline","slot","start"],["name","calendar-clear-outline","slot","start"],[3,"formGroup"],[1,"game-input-item"],["label","nombre de usuario","labelPlacement","stacked","formControlName","username","placeholder","Introduce tu nombre"],["label","URL de Icono de Avatar","labelPlacement","stacked","formControlName","image","placeholder","https://pendejo.com/imagen.jpg"],[1,"ion-padding","action-buttons-section"],["expand","block","fill","outline","color","tertiary",1,"game-button",3,"click"],["name","refresh-outline","slot","start"],[3,"click"],["name","pencil-sharp"],[3,"click","disabled"],["name","save-outline"]],template:function(e,l){1&e&&(t.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),t.nrm(3,"ion-back-button",3),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Perfil del Pobre"),t.k0s(),t.j41(6,"ion-buttons",4),t.nVh(7,b,2,0,"ion-button")(8,f,2,1,"ion-button",5),t.k0s()()(),t.j41(9,"ion-content",6)(10,"div",7)(11,"div",8)(12,"ion-avatar",9),t.nrm(13,"img",10),t.k0s(),t.j41(14,"h1",11),t.EFF(15),t.k0s()(),t.j41(16,"ion-list",12)(17,"ion-list-header")(18,"ion-label",13),t.EFF(19,"Informacion del orfanato:"),t.k0s()(),t.j41(20,"ion-item",14),t.nrm(21,"ion-icon",15),t.j41(22,"ion-label")(23,"p"),t.EFF(24,"Correo de Contacto"),t.k0s(),t.j41(25,"h2"),t.EFF(26),t.k0s()()(),t.j41(27,"ion-item",14),t.nrm(28,"ion-icon",16),t.j41(29,"ion-label")(30,"p"),t.EFF(31,"Registro de Entrada"),t.k0s(),t.j41(32,"h2"),t.EFF(33),t.nI1(34,"date"),t.k0s()()()(),t.j41(35,"form",17)(36,"ion-list",12)(37,"ion-list-header")(38,"ion-label",13),t.EFF(39,"Identidad P\xfablica"),t.k0s()(),t.j41(40,"ion-item",18),t.nrm(41,"ion-input",19),t.k0s(),t.j41(42,"ion-item",18),t.nrm(43,"ion-input",20),t.k0s()()(),t.j41(44,"div",21)(45,"ion-button",22),t.bIt("click",function(){return l.resetForm()}),t.nrm(46,"ion-icon",23),t.EFF(47," Deshacer Cambios "),t.k0s()()()()),2&e&&(t.Y8G("translucent",!0),t.R7$(7),t.vxM(l.isEditing?8:7),t.R7$(2),t.Y8G("fullscreen",!0),t.R7$(4),t.Y8G("src",l.profileForm.value.image||"assets/default-avatar.png",t.B4B),t.R7$(2),t.JRh(l.profileForm.value.username||"Cargando..."),t.R7$(),t.Y8G("inset",!0),t.R7$(10),t.JRh(l.userData.email),t.R7$(7),t.JRh(t.i5U(34,10,l.userData.createdAt,"longDate")),t.R7$(2),t.Y8G("formGroup",l.profileForm),t.R7$(),t.Y8G("inset",!0))},dependencies:[s.qT,s.BC,s.cb,n.mC,n.Jm,n.QW,n.W9,n.eU,n.iq,n.$w,n.uz,n.he,n.nf,n.AF,n.BC,n.ai,n.Gw,n.el,s.j4,s.JD,d.vh],styles:['@charset "UTF-8";[_ngcontent-%COMP%]:root{--game-primary: var(--ion-color-primary);--game-text: var(--panel-text);--game-bg-main: var(--ion-background-color);--game-glass: var(--panel-field);--game-border: var(--panel-border);--game-accent: var( --ion-color-step-500 )}.game-background[_ngcontent-%COMP%]{--background: var(--game-bg-main);background:var(--game-bg-main);position:relative;overflow:hidden}.game-background[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiM5OTkiIGZpbGwtb3BhY2l0eT0iMC4xIj48cGF0aCBkPSJNMjggMjBWMTJoNFYwSDAxMHY0SDhWMjhoNFYxNmg0VjEydjRWMzJoNEwyOCAyMGYwLTAiLz48L2c+PC9nPjwvc3ZnPg==);background-size:100px;opacity:.08;animation:_ngcontent-%COMP%_backgroundMove 60s linear infinite;pointer-events:none}@keyframes _ngcontent-%COMP%_backgroundMove{0%{background-position:0 0}to{background-position:100% 100%}}.game-toolbar[_ngcontent-%COMP%]{--background: var(--btn-bg);--color: var(--btn-text)}.game-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-weight:700;font-family:"Press Start 2P",cursive;text-shadow:1px 1px 2px rgba(0,0,0,.2)}.game-toolbar[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%], .game-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: var(--btn-text)}.profile-container[_ngcontent-%COMP%]{padding:20px;max-width:600px;margin:0 auto}.glass-effect[_ngcontent-%COMP%]{background:var(--game-glass);border-radius:20px;box-shadow:0 8px 32px #0000000d;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);border:1px solid var(--game-border);margin-bottom:24px;overflow:hidden}.avatar-section[_ngcontent-%COMP%]{text-align:center;padding:30px 20px;display:flex;flex-direction:column;align-items:center}.avatar-section[_ngcontent-%COMP%]   .game-avatar[_ngcontent-%COMP%]{width:180px;height:180px;outline:4px solid var(--game-primary);outline-offset:4px;border:4px solid var(--game-bg-main);box-shadow:0 0 20px var(--game-primary);transition:transform .4s cubic-bezier(.175,.885,.32,1.275)}.avatar-section[_ngcontent-%COMP%]   .game-avatar[_ngcontent-%COMP%]:hover{transform:scale(1.08) rotate(3deg)}.avatar-section[_ngcontent-%COMP%]   .username-display[_ngcontent-%COMP%]{color:var(--game-text);font-size:2em;font-weight:800;margin-top:25px;letter-spacing:-.5px;font-family:Orbitron,sans-serif}.game-list[_ngcontent-%COMP%]{--background: transparent}.game-list[_ngcontent-%COMP%]   .list-header-label[_ngcontent-%COMP%]{color:var(--game-primary);font-size:.85em;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;padding-bottom:10px}.game-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;--color: var(--game-text);--border-color: var(--game-border);font-family:Roboto Mono,monospace}.game-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--game-primary)}.game-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--game-text);opacity:.6}.game-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--game-text);font-weight:600}.game-list[_ngcontent-%COMP%]   .game-input-item[_ngcontent-%COMP%]{--highlight-color-focused: var(--game-primary)}.game-list[_ngcontent-%COMP%]   .game-input-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--color: var(--game-text);font-weight:500}.action-buttons-section[_ngcontent-%COMP%]   .game-button[_ngcontent-%COMP%]{--background: var(--btn-bg);--color: var(--btn-text);--border-radius: 12px;font-weight:700;height:50px;margin-top:10px;box-shadow:0 4px 12px #0000001a}.action-buttons-section[_ngcontent-%COMP%]   .game-button[_ngcontent-%COMP%]::part(native){letter-spacing:1px}.action-buttons-section[_ngcontent-%COMP%]   .reset-btn[_ngcontent-%COMP%]{--color: var(--game-text);--border-color: var(--game-border);margin-top:15px}']}))}return a(),o})()}];let v=(()=>{var a;class o{static#t=a=()=>(this.\u0275fac=function(e){return new(e||o)},this.\u0275mod=t.$C({type:o}),this.\u0275inj=c.G2t({imports:[u.iI.forChild(h),u.iI]}))}return a(),o})();var P=r(554);let C=(()=>{var a;class o{static#t=a=()=>(this.\u0275fac=function(e){return new(e||o)},this.\u0275mod=t.$C({type:o}),this.\u0275inj=c.G2t({imports:[d.MD,s.YN,n.bv,v,P.G,s.X1]}))}return a(),o})()}}]);