"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4051],{4051:(W,u,e)=>{e.r(u),e.d(u,{LobbyPageModule:()=>N});var m=e(2200),v=e(4341),g=e(7343),h=e(8132),f=e(467),M=e(6354),O=e(4572),b=e(906),x=e(5919),t=e(3664),l=e(2615),y=e(8814),_=e(3144),j=e(9477),R=e(5452),I=e(5366),F=e(1377),k=e(4398),w=e(6369),T=e(8531),G=e(6844),C=e(6418);const L=["gameToast"];function E(r,s){1&r&&(t.j41(0,"span",38),t.nrm(1,"ion-icon",39),t.EFF(2," Host "),t.k0s())}function Y(r,s){if(1&r&&(t.j41(0,"div",32)(1,"div",33),t.nrm(2,"img",34)(3,"div",35),t.k0s(),t.j41(4,"div",36)(5,"h3"),t.EFF(6),t.k0s(),t.DNE(7,E,3,0,"span",37),t.k0s()()),2&r){const d=s.$implicit,o=t.XpG();t.R7$(2),t.Y8G("src",d.userData.image,t.B4B),t.R7$(4),t.JRh(d.userData.username),t.R7$(),t.Y8G("ngIf",d.userData.uid==(null==o.host||null==o.host.userData?null:o.host.userData.uid))}}function $(r,s){1&r&&(t.j41(0,"div",40),t.nrm(1,"ion-spinner",41),t.j41(2,"p"),t.EFF(3,"Esperando al host..."),t.k0s()())}function B(r,s){if(1&r){const d=t.RV6();t.j41(0,"button",42),t.bIt("click",function(){l.eBV(d);const a=t.XpG();return l.Njj(a.startGame())}),t.EFF(1," INICIAR PARTIDA "),t.k0s()}}function D(r,s){if(1&r){const d=t.RV6();t.j41(0,"button",42),t.bIt("click",function(){l.eBV(d);const a=t.XpG();return l.Njj(a.join())}),t.EFF(1," UNIRSE AHORA "),t.k0s()}}function U(r,s){if(1&r){const d=t.RV6();t.j41(0,"button",43),t.bIt("click",function(){l.eBV(d);const a=t.XpG();return l.Njj(a.quit())}),t.EFF(1," abandonar sala "),t.k0s()}}const X=[{path:"",component:(()=>{var r;class s{constructor(o,a,n,i,c,p,A,H){this.router=o,this.activatedRoute=a,this.user=n,this.game=i,this.room=c,this.observer=p,this.gameSettings=A,this.audio=H,this.roomCode="loading...",this.maxPlayers=10,this.isHost=!1,this.players=[],this.roomInfo=null,this.isInRoom=!0,this.showOptions=!1,this.logo="assets/icon/logo.png",this.currentUser={uid:"",username:"Loading...",email:"loading...",createdAt:"loading...",image:"https://media1.giphy.com/media/v1.Y2lkPTZjMDliOTUycGVhMXQ1YnpleXEwNG5tMnlvcXh1eHY2YjQ2aDZxNWVoMzcydWg1cCZlcD12MV9zdGlja2Vyc19zZWFyY2gmY3Q9cw/L05HgB2h6qICDs5Sms/200.gif"},this.modalOpen=!1,this.modalConfig={mode:"info",title:"",message:""},this.ParticlesId="tsparticles",this.particlesInit=function(){var S=(0,f.A)(function*(P){yield(0,x.m)(P)});return function(P){return S.apply(this,arguments)}}(),this.particlesOptions={fullScreen:{enable:!0,zIndex:-1},background:{color:{value:"transparent"}},fpsLimit:120,particles:{color:{value:"#ffffff"},links:{color:"#ffffff",distance:150,enable:!0,opacity:.5,width:1},move:{direction:b.FWc.none,enable:!0,outModes:{default:b.Yzx.bounce},random:!1,speed:1,straight:!1},number:{density:{enable:!0,area:800},value:80},opacity:{value:.5},shape:{type:"circle"},size:{value:{min:1,max:5}}},detectRetina:!0},this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){this.audio.playMusic("soundtrack_menu");const o=this.activatedRoute.snapshot.paramMap.get("roomCode");o&&(this.roomCode=o);const a=this.user.getCurrentUser().pipe((0,M.T)(i=>i.data)),n=this.observer.getRoomInfo(this.roomCode);(0,O.z)([a,n]).subscribe(([i,c])=>{this.currentUser=i,this.roomInfo=c,c||this.showMsjError(),this.isHost=i?.uid===c?.host,"in_progress"===c?.state&&this.router.navigate([`game/${this.roomCode}`])}),this.observer.listenPlayersWithUserData(this.roomCode).subscribe(i=>{this.players=i||[];const c=this.players.some(p=>p.userData?.uid===this.currentUser?.uid);this.isInRoom=c})}get host(){return this.roomInfo&&this.players.length?this.players.find(o=>o.userData?.uid===this.roomInfo.host):null}join(){this.room.joinRoom(this.roomCode).subscribe(()=>{this.isInRoom=!0})}quit(){this.room.quitRoom(this.roomCode).subscribe(o=>{console.log(o),this.isInRoom=!1,this.router.navigate(["home"])})}startGame(){this.game.startGame("Classic",this.roomCode).subscribe(o=>{console.log(o),200===o.code&&this.router.navigate([`game/${this.roomCode}`]),this.toast.addToast({title:"Terrible",message:o.message})})}updateAssets(o){o.logo&&(this.logo=o.logo)}showMsjError(){this.modalConfig={mode:"info",style:"error",title:"Sala no encontrada",message:"La sala no se encuentra o no existe"},this.modalOpen=!0}handleModalResponse(o){this.modalOpen=!1,this.router.navigate(["home"])}copyToClipboard(o){var a=this;return(0,f.A)(function*(){if(navigator.clipboard&&window.isSecureContext)try{yield navigator.clipboard.writeText(o),a.toast.addToast({title:"Copiado",message:"Codigo copiado al portapapeles!",type:"success"})}catch{a.toast.addToast({title:"Error",message:"ha ocurrido un error, intenta mas tarde",type:"warning"})}})()}static#t=r=()=>(this.\u0275fac=function(a){return new(a||s)(t.rXU(y.Ix),t.rXU(y.nX),t.rXU(_.K),t.rXU(j.Z),t.rXU(R.W),t.rXU(I.M),t.rXU(F.M),t.rXU(k.U))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-lobby"]],viewQuery:function(a,n){if(1&a&&t.GBs(L,5),2&a){let i;t.mGM(i=t.lsd())&&(n.toast=i.first)}},standalone:!1,decls:48,vars:18,consts:[["gameToast",""],[1,"lobby-content"],[1,"top-bar"],[1,"header-content"],[1,"logo-section"],["alt","Chafopoli",1,"top-logo",3,"src"],[1,"top-tittle"],[1,"profile-section"],[3,"assets","currentUser"],[1,"lobby-container"],[1,"players-panel"],[1,"panel-header"],["name","people-outline"],[1,"count-pill"],[1,"players-grid"],["class","player-card",4,"ngFor","ngForOf"],[1,"match-panel"],[1,"host-section"],[1,"host-ring"],["alt","host",1,"host-img",3,"src"],[1,"host-label"],[1,"host-name"],[1,"match-details"],[1,"detail-row"],[1,"code"],["name","clipboard-outline",1,"copy",3,"click"],[1,"action-area"],["class","status-box waiting",4,"ngIf"],["class","btn-primary",3,"click",4,"ngIf"],["class","btn-sec",3,"click",4,"ngIf"],[3,"id","options","particlesInit"],[3,"close","isOpen","config"],[1,"player-card"],[1,"avatar-wrapper"],[1,"avatar",3,"src"],[1,"status-indicator","online"],[1,"info"],["class","host-badge",4,"ngIf"],[1,"host-badge"],["name","star"],[1,"status-box","waiting"],["name","crescent"],[1,"btn-primary",3,"click"],[1,"btn-sec",3,"click"]],template:function(a,n){if(1&a){const i=t.RV6();t.j41(0,"ion-content",1)(1,"header",2)(2,"div",3)(3,"div",4),t.nrm(4,"img",5),t.k0s(),t.j41(5,"div",6),t.EFF(6," LOBBY "),t.k0s(),t.j41(7,"div",7)(8,"app-profile",8),t.bIt("assets",function(p){return l.eBV(i),l.Njj(n.updateAssets(p))}),t.k0s()()()(),t.j41(9,"div",9)(10,"section",10)(11,"div",11),t.nrm(12,"ion-icon",12),t.j41(13,"h2"),t.EFF(14,"Jugadores conectados"),t.k0s(),t.j41(15,"span",13),t.EFF(16),t.k0s()(),t.j41(17,"div",14),t.DNE(18,Y,8,3,"div",15),t.k0s()(),t.j41(19,"aside",16)(20,"div",17)(21,"div",18),t.nrm(22,"img",19),t.k0s(),t.j41(23,"p",20),t.EFF(24,"GAME HOST"),t.k0s(),t.j41(25,"h2",21),t.EFF(26),t.k0s()(),t.j41(27,"div",22)(28,"div",23)(29,"span"),t.EFF(30,"C\xf3digo de sala"),t.k0s(),t.j41(31,"strong",24),t.EFF(32),t.j41(33,"ion-icon",25),t.bIt("click",function(){return l.eBV(i),l.Njj(n.copyToClipboard(n.roomCode))}),t.k0s()()(),t.j41(34,"div",23)(35,"span"),t.EFF(36,"Capacidad"),t.k0s(),t.j41(37,"strong"),t.EFF(38),t.k0s()()(),t.j41(39,"div",26),t.DNE(40,$,4,0,"div",27)(41,B,2,0,"button",28)(42,D,2,0,"button",28)(43,U,2,0,"button",29),t.k0s()()(),t.nrm(44,"ngx-particles",30)(45,"app-game-toast",null,0),t.j41(47,"app-game-modal",31),t.bIt("close",function(p){return l.eBV(i),l.Njj(n.handleModalResponse(p))}),t.k0s()()}2&a&&(t.R7$(4),t.Y8G("src",n.logo,t.B4B),t.R7$(4),t.Y8G("currentUser",n.currentUser),t.R7$(8),t.JRh(n.players.length),t.R7$(2),t.Y8G("ngForOf",n.players),t.R7$(4),t.Y8G("src",null==n.host||null==n.host.userData?null:n.host.userData.image,t.B4B),t.R7$(4),t.JRh(null==n.host||null==n.host.userData?null:n.host.userData.username),t.R7$(6),t.SpI("",n.roomCode," "),t.R7$(6),t.Lme("",n.players.length," / ",n.maxPlayers),t.R7$(2),t.Y8G("ngIf",!n.isHost),t.R7$(),t.Y8G("ngIf",n.isHost),t.R7$(),t.Y8G("ngIf",!n.isInRoom),t.R7$(),t.Y8G("ngIf",n.isInRoom),t.R7$(),t.Y8G("id",n.ParticlesId)("options",n.particlesOptions)("particlesInit",n.particlesInit),t.R7$(3),t.Y8G("isOpen",n.modalOpen)("config",n.modalConfig))},dependencies:[m.Sq,m.bT,g.W9,g.iq,g.w2,w.n,T.p,G.F,C.Q7],styles:['@charset "UTF-8";.top-bar[_ngcontent-%COMP%]{width:100%;height:80px;background:#000;border-bottom:1px solid rgba(255,255,255,.1);display:flex;align-items:center;justify-content:center;position:sticky;top:0;z-index:100}.top-bar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{width:100%;max-width:1400px;padding:0 30px;display:flex;justify-content:space-between;align-items:center}.action-area[_ngcontent-%COMP%], .status-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.logo-section[_ngcontent-%COMP%]{display:flex;align-items:center}.logo-section[_ngcontent-%COMP%]   .top-logo[_ngcontent-%COMP%]{height:50px;width:auto}.profile-section[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}.profile-section[_ngcontent-%COMP%]   app-profile[_ngcontent-%COMP%]{display:block;margin:0;padding:0}.lobby-container[_ngcontent-%COMP%]{display:flex;gap:30px;padding:30px;max-width:1400px;margin:0 auto}.players-panel[_ngcontent-%COMP%]{flex:7;background:var(--surface-color);border-radius:24px;padding:30px;border:1px solid var(--border-color)}.players-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;margin-bottom:30px}.players-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:800;text-transform:uppercase;letter-spacing:1px;margin:0}.players-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .count-pill[_ngcontent-%COMP%]{background:var(--ion-color-primary);color:var(--ion-color-primary-contrast);padding:4px 12px;border-radius:20px;font-weight:700}.players-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}.player-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;background:var(--surface-color-2);padding:16px;border-radius:20px;border:1px solid rgba(255,255,255,.05);transition:all .3s cubic-bezier(.175,.885,.32,1.275)}.player-card[_ngcontent-%COMP%]:hover{transform:scale(1.02);background:var(--control-hover);box-shadow:0 10px 20px #0003}.player-card[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]{position:relative}.player-card[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:16px;object-fit:cover}.player-card[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{position:absolute;bottom:-2px;right:-2px;width:14px;height:14px;border-radius:50%;border:3px solid var(--surface-color-2)}.player-card[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]   .status-indicator.online[_ngcontent-%COMP%]{background:#2dd36f}.player-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;margin:0;font-weight:700}.player-card[_ngcontent-%COMP%]   .host-badge[_ngcontent-%COMP%]{color:#ffd534;font-size:.75rem;font-weight:800;text-transform:uppercase;display:flex;align-items:center;gap:4px}.match-panel[_ngcontent-%COMP%]{flex:3;background:var(--surface-color);border-radius:24px;padding:40px 30px;border:1px solid var(--border-color);display:flex;flex-direction:column}.match-panel[_ngcontent-%COMP%]   .host-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.match-panel[_ngcontent-%COMP%]   .host-section[_ngcontent-%COMP%]   .host-ring[_ngcontent-%COMP%]{width:140px;height:140px;border-radius:50%;margin:0 auto 15px;padding:5px;border:2px dashed var(--ion-color-primary);animation:_ngcontent-%COMP%_rotate 10s linear infinite}.match-panel[_ngcontent-%COMP%]   .host-section[_ngcontent-%COMP%]   .host-ring[_ngcontent-%COMP%]   .host-img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;animation:_ngcontent-%COMP%_unrotate 10s linear infinite}.match-panel[_ngcontent-%COMP%]   .host-section[_ngcontent-%COMP%]   .host-label[_ngcontent-%COMP%]{font-size:.7rem;letter-spacing:3px;color:var(--ion-color-step-400)}.match-panel[_ngcontent-%COMP%]   .host-section[_ngcontent-%COMP%]   .host-name[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:900}.match-details[_ngcontent-%COMP%]{background:var(--surface-color-2);border-radius:20px;padding:20px;margin-bottom:30px}.match-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid rgba(255,255,255,.05)}.match-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]:last-child{border:none}.match-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--ion-color-step-500)}.match-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-family:monospace;font-size:1.2rem;display:flex;align-items:center}.match-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]   .copy[_ngcontent-%COMP%]{background:var(--surface-color-2);border-radius:4px;padding:3px;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:18px;border-radius:16px;background:var(--ion-color-primary);color:var(--ion-color-primary-contrast);font-weight:900;text-transform:uppercase;letter-spacing:1px;border:none;cursor:pointer;box-shadow:0 4px 15px rgba(var(--ion-color-primary-rgb),.4);transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{filter:brightness(1.2);transform:translateY(-2px)}.top-tittle[_ngcontent-%COMP%]{font-family:fantasy;font-size:xxx-large}.btn-sec[_ngcontent-%COMP%]{width:100%;padding:18px;border-radius:16px;background:red;color:#fff;font-weight:900;text-transform:uppercase;letter-spacing:1px;border:none;cursor:pointer;margin-top:7px;transition:all .3s ease}.btn-sec[_ngcontent-%COMP%]:hover{filter:brightness(1.2);transform:translateY(-2px)}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_unrotate{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}@media (max-width: 1100px){.lobby-container[_ngcontent-%COMP%]{flex-direction:column}.top-bar[_ngcontent-%COMP%]{padding:0 20px}}']}))}return r(),s})()}];let z=(()=>{var r;class s{static#t=r=()=>(this.\u0275fac=function(a){return new(a||s)},this.\u0275mod=t.$C({type:s}),this.\u0275inj=l.G2t({imports:[h.iI.forChild(X),h.iI]}))}return r(),s})();var V=e(554);let N=(()=>{var r;class s{static#t=r=()=>(this.\u0275fac=function(a){return new(a||s)},this.\u0275mod=t.$C({type:s}),this.\u0275inj=l.G2t({imports:[m.MD,v.YN,g.bv,z,V.G,C.HB]}))}return r(),s})()}}]);