"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[982],{982:(V,h,t)=>{t.r(h),t.d(h,{FinishPageModule:()=>X});var p=t(2200),M=t(4341),m=t(7343),f=t(8132),O=t(467),u=t(906),v=t(5919),x=t(6354),y=t(4572),n=t(3664),l=t(2615),P=t(7058),k=t(3944),F=t(9477),w=t(5452),_=t(5366),j=t(1377),R=t(4398),C=t(6418),I=t(6369),G=t(8531),z=t(6844);const E=["gameToast"];function $(a,o){1&a&&n.nrm(0,"ion-icon",35)}function D(a,o){1&a&&(n.j41(0,"span",36),n.nrm(1,"ion-icon",37),n.EFF(2," GANADOR "),n.k0s())}function T(a,o){if(1&a&&(n.j41(0,"div",25)(1,"div",26),n.EFF(2),n.k0s(),n.j41(3,"div",27),n.nrm(4,"img",28),n.DNE(5,$,1,0,"ion-icon",29),n.k0s(),n.j41(6,"div",30)(7,"h3"),n.EFF(8),n.k0s(),n.DNE(9,D,3,0,"span",31),n.k0s(),n.j41(10,"div",32)(11,"span",33),n.EFF(12),n.nI1(13,"number"),n.k0s(),n.j41(14,"span",34),n.EFF(15,"PTS"),n.k0s()()()),2&a){const g=o.$implicit,e=o.index,r=n.XpG();n.Y8G("ngClass",r.getRankClass(e)),n.R7$(2),n.SpI("#",e+1),n.R7$(2),n.Y8G("src",g.userData.image,n.B4B),n.R7$(),n.Y8G("ngIf",0===e),n.R7$(3),n.JRh(g.userData.username),n.R7$(),n.Y8G("ngIf",0===e),n.R7$(3),n.JRh(n.bMT(13,7,g.gameData.points))}}function U(a,o){if(1&a&&(n.j41(0,"div",38)(1,"p",39),n.EFF(2,"VICTORIA MAGISTRAL"),n.k0s(),n.j41(3,"div",40),n.nrm(4,"img",41)(5,"div",42),n.k0s(),n.j41(6,"h1",43),n.EFF(7),n.k0s(),n.j41(8,"div",44),n.EFF(9),n.k0s()()),2&a){const g=n.XpG();n.R7$(4),n.Y8G("src",g.sortedPlayers[0].userData.image,n.B4B),n.R7$(3),n.JRh(g.sortedPlayers[0].userData.username),n.R7$(2),n.SpI(" ",g.sortedPlayers[0].gameData.points," PUNTOS ")}}const Y=[{path:"",component:(()=>{var a;class o{constructor(e,r,i,s,c,d,N,A){this.router=e,this.activatedRoute=r,this.user=i,this.game=s,this.room=c,this.observer=d,this.gameSettings=N,this.audio=A,this.currentUser={uid:"",username:"Loading...",image:"assets/default-avatar.png"},this.sortedPlayers=[],this.ParticlesId="tsparticles",this.roomCode="loading...",this.maxPlayers=10,this.isHost=!1,this.players=[],this.roomInfo=null,this.isInRoom=!0,this.logo="assets/icon/logo-light.png",this.modalOpen=!1,this.modalConfig={mode:"info",title:"",message:""},this.particlesInit=function(){var L=(0,O.A)(function*(b){yield(0,v.m)(b)});return function(b){return L.apply(this,arguments)}}(),this.particlesOptions={fullScreen:{enable:!0,zIndex:-1},background:{color:{value:"transparent"}},fpsLimit:60,particles:{color:{value:"#ffd700"},links:{enable:!1},move:{direction:u.FWc.top,enable:!0,random:!0,speed:2,outModes:{default:u.Yzx.out}},number:{value:50},opacity:{value:.6},shape:{type:"circle"},size:{value:{min:2,max:6}}}},this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){this.audio.playMusic("soundtrack_menu");const e=this.activatedRoute.snapshot.paramMap.get("roomCode");e&&(this.roomCode=e);const r=this.user.getCurrentUser().pipe((0,x.T)(s=>s.data)),i=this.observer.getRoomInfo(this.roomCode);(0,y.z)([r,i]).subscribe(([s,c])=>{this.currentUser=s,this.roomInfo=c,c?(this.isHost=s?.uid===c?.host,"finished"!==c?.state&&this.router.navigate([`lobby/${this.roomCode}`])):this.showMsjError()}),this.observer.listenPlayersWithUserData(this.roomCode).subscribe(s=>{this.players=s||[],this.sortPlayers();const c=this.players.some(d=>d.userData?.uid===this.currentUser?.uid);this.isInRoom=c})}get host(){return this.roomInfo&&this.players.length?this.players.find(e=>e.userData?.uid===this.roomInfo.host):null}showMsjError(){this.modalConfig={mode:"info",style:"error",title:"Sala no encontrada",message:"La sala no se encuentra o no existe"},this.modalOpen=!0}updateAssets(e){e.logo&&(this.logo=e.logo)}sortPlayers(){this.sortedPlayers=[...this.players].sort((e,r)=>(r.gameData?.points||0)-(e.gameData?.points||0))}getRankClass(e){return 0===e?"rank-1":1===e?"rank-2":2===e?"rank-3":""}continuePlaying(){this.router.navigate(["lobby",this.roomCode])}exitRoom(){this.room.quitRoom(this.roomCode).subscribe(()=>{this.router.navigate(["home"])})}static#n=a=()=>(this.\u0275fac=function(r){return new(r||o)(n.rXU(P.Ix),n.rXU(P.nX),n.rXU(k.D),n.rXU(F.Z),n.rXU(w.W),n.rXU(_.M),n.rXU(j.M),n.rXU(R.U))},this.\u0275cmp=n.VBU({type:o,selectors:[["app-finish"]],viewQuery:function(r,i){if(1&r&&n.GBs(E,5),2&r){let s;n.mGM(s=n.lsd())&&(i.toast=s.first)}},standalone:!1,decls:33,vars:9,consts:[["gameToast",""],[1,"lobby-content"],[1,"top-bar"],[1,"header-content"],[1,"logo-section"],["alt","Logo",1,"top-logo",3,"src"],[1,"top-tittle"],[1,"profile-section"],[3,"assets","currentUser"],[1,"lobby-container"],[1,"results-panel"],[1,"panel-header"],["name","podium-outline",1,"trophy-icon"],[1,"subtitle"],[1,"ranking-list"],["class","player-card rank-card",3,"ngClass",4,"ngFor","ngForOf"],[1,"match-panel","winner-highlight"],["class","winner-section",4,"ngIf"],[1,"action-area"],[1,"btn-primary",3,"click"],["name","refresh-outline",2,"margin-right","8px"],[1,"btn-sec",3,"click"],["name","exit-outline",2,"margin-right","8px"],[3,"id","options","particlesInit"],[3,"isOpen","config"],[1,"player-card","rank-card",3,"ngClass"],[1,"rank-number"],[1,"avatar-wrapper"],[1,"avatar",3,"src"],["name","ribbon","class","crown-icon",4,"ngIf"],[1,"info"],["class","winner-badge",4,"ngIf"],[1,"score-display"],[1,"score-value"],[1,"score-label"],["name","ribbon",1,"crown-icon"],[1,"winner-badge"],["name","star"],[1,"winner-section"],[1,"winner-label"],[1,"winner-ring"],[1,"winner-img",3,"src"],[1,"ring-effect"],[1,"winner-name"],[1,"winner-score"]],template:function(r,i){if(1&r){const s=n.RV6();n.j41(0,"ion-content",1)(1,"header",2)(2,"div",3)(3,"div",4),n.nrm(4,"img",5),n.k0s(),n.j41(5,"div",6),n.EFF(6," GAME FINISHED "),n.k0s(),n.j41(7,"div",7)(8,"app-profile",8),n.bIt("assets",function(d){return l.eBV(s),l.Njj(i.updateAssets(d))}),n.k0s()()()(),n.j41(9,"div",9)(10,"section",10)(11,"div",11),n.nrm(12,"ion-icon",12),n.j41(13,"div")(14,"h2"),n.EFF(15,"Tabla de Posiciones"),n.k0s(),n.j41(16,"p",13),n.EFF(17,"Resultados finales de la partida"),n.k0s()()(),n.j41(18,"div",14),n.DNE(19,T,16,9,"div",15),n.k0s()(),n.j41(20,"aside",16),n.DNE(21,U,10,3,"div",17),n.j41(22,"div",18)(23,"button",19),n.bIt("click",function(){return l.eBV(s),l.Njj(i.continuePlaying())}),n.nrm(24,"ion-icon",20),n.EFF(25," Volver al Lobby "),n.k0s(),n.j41(26,"button",21),n.bIt("click",function(){return l.eBV(s),l.Njj(i.exitRoom())}),n.nrm(27,"ion-icon",22),n.EFF(28," Salir "),n.k0s()()()(),n.nrm(29,"ngx-particles",23)(30,"app-game-toast",null,0)(32,"app-game-modal",24),n.k0s()}2&r&&(n.R7$(4),n.Y8G("src",i.logo,n.B4B),n.R7$(4),n.Y8G("currentUser",i.currentUser),n.R7$(11),n.Y8G("ngForOf",i.sortedPlayers),n.R7$(2),n.Y8G("ngIf",i.sortedPlayers.length>0),n.R7$(8),n.Y8G("id",i.ParticlesId)("options",i.particlesOptions)("particlesInit",i.particlesInit),n.R7$(3),n.Y8G("isOpen",i.modalOpen)("config",i.modalConfig))},dependencies:[p.YU,p.Sq,p.bT,m.W9,m.iq,C.Q7,I.n,G.p,z.F,p.QX],styles:['.top-bar[_ngcontent-%COMP%]{width:100%;height:80px;background:#000;border-bottom:1px solid rgba(255,255,255,.1);display:flex;align-items:center;justify-content:center;position:sticky;top:0;z-index:100}.top-bar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{width:100%;max-width:1400px;padding:0 30px;display:flex;justify-content:space-between;align-items:center}.logo-section[_ngcontent-%COMP%]   .top-logo[_ngcontent-%COMP%]{height:50px;width:auto}.profile-section[_ngcontent-%COMP%]   app-profile[_ngcontent-%COMP%]{display:block}.lobby-container[_ngcontent-%COMP%]{display:flex;gap:30px;padding:30px;max-width:1400px;margin:0 auto;min-height:calc(100vh - 80px)}.results-panel[_ngcontent-%COMP%]{flex:7;background:var(--surface-color, #1e1e1e);border-radius:24px;padding:30px;border:1px solid rgba(255,255,255,.05);display:flex;flex-direction:column}.results-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;margin-bottom:25px}.results-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .trophy-icon[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--ion-color-primary, #ffd534)}.results-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:800;text-transform:uppercase;letter-spacing:1px}.results-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;color:#888;font-size:.9rem}.ranking-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;overflow-y:auto;padding-right:5px}.player-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;background:var(--surface-color-2, #2c2c2c);padding:15px 20px;border-radius:16px;border:1px solid rgba(255,255,255,.05);transition:transform .2s ease}.player-card[_ngcontent-%COMP%]:hover{transform:scale(1.01);background:#ffffff14}.player-card[_ngcontent-%COMP%]   .rank-number[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:900;color:#555;width:35px;text-align:center}.player-card[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]{position:relative}.player-card[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:14px;object-fit:cover}.player-card[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]   .crown-icon[_ngcontent-%COMP%]{position:absolute;top:-12px;right:-8px;color:gold;font-size:1.2rem;transform:rotate(15deg);filter:drop-shadow(0 2px 4px rgba(0,0,0,.5))}.player-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{flex:1}.player-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:700}.player-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .winner-badge[_ngcontent-%COMP%]{color:gold;font-size:.7rem;font-weight:800;display:flex;align-items:center;gap:4px}.player-card[_ngcontent-%COMP%]   .score-display[_ngcontent-%COMP%]{text-align:right}.player-card[_ngcontent-%COMP%]   .score-display[_ngcontent-%COMP%]   .score-value[_ngcontent-%COMP%]{display:block;font-size:1.3rem;font-weight:900;color:var(--ion-color-primary, #fff)}.player-card[_ngcontent-%COMP%]   .score-display[_ngcontent-%COMP%]   .score-label[_ngcontent-%COMP%]{font-size:.7rem;color:#888;font-weight:700}.rank-card.rank-1[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ffd70026,#ffd70005);border:1px solid rgba(255,215,0,.4)}.rank-card.rank-1[_ngcontent-%COMP%]   .rank-number[_ngcontent-%COMP%], .rank-card.rank-1[_ngcontent-%COMP%]   .score-value[_ngcontent-%COMP%]{color:gold}.rank-card.rank-2[_ngcontent-%COMP%]{border-left:4px solid #c0c0c0}.rank-card.rank-2[_ngcontent-%COMP%]   .rank-number[_ngcontent-%COMP%]{color:silver}.rank-card.rank-3[_ngcontent-%COMP%]{border-left:4px solid #cd7f32}.rank-card.rank-3[_ngcontent-%COMP%]   .rank-number[_ngcontent-%COMP%]{color:#cd7f32}.match-panel[_ngcontent-%COMP%]{flex:3;background:var(--surface-color, #1e1e1e);border-radius:24px;padding:40px 30px;border:1px solid rgba(255,255,255,.05);display:flex;flex-direction:column;justify-content:center;position:relative;overflow:hidden}.match-panel.winner-highlight[_ngcontent-%COMP%]{background:radial-gradient(circle at top center,rgba(var(--ion-color-primary-rgb),.2),var(--surface-color) 70%)}.match-panel[_ngcontent-%COMP%]   .winner-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:auto;margin-top:20px;z-index:2}.match-panel[_ngcontent-%COMP%]   .winner-section[_ngcontent-%COMP%]   .winner-label[_ngcontent-%COMP%]{letter-spacing:4px;font-size:.8rem;color:var(--ion-color-primary);margin-bottom:25px;font-weight:900;opacity:.8}.match-panel[_ngcontent-%COMP%]   .winner-section[_ngcontent-%COMP%]   .winner-ring[_ngcontent-%COMP%]{width:160px;height:160px;margin:0 auto 20px;position:relative;display:flex;justify-content:center;align-items:center}.match-panel[_ngcontent-%COMP%]   .winner-section[_ngcontent-%COMP%]   .winner-ring[_ngcontent-%COMP%]   .winner-img[_ngcontent-%COMP%]{width:90%;height:90%;border-radius:50%;object-fit:cover;z-index:2;border:4px solid var(--ion-color-primary);box-shadow:0 10px 30px #00000080}.match-panel[_ngcontent-%COMP%]   .winner-section[_ngcontent-%COMP%]   .winner-ring[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:100%;border-radius:50%;border:2px dashed var(--ion-color-primary);animation:_ngcontent-%COMP%_rotate 15s linear infinite;opacity:.5}.match-panel[_ngcontent-%COMP%]   .winner-section[_ngcontent-%COMP%]   .winner-name[_ngcontent-%COMP%]{font-size:2rem;margin:15px 0 10px;font-weight:900;line-height:1.1}.match-panel[_ngcontent-%COMP%]   .winner-section[_ngcontent-%COMP%]   .winner-score[_ngcontent-%COMP%]{display:inline-block;background:var(--ion-color-primary);color:var(--ion-color-primary-contrast);padding:6px 16px;border-radius:20px;font-weight:800;font-size:.9rem;box-shadow:0 4px 15px rgba(var(--ion-color-primary-rgb),.4)}.match-panel[_ngcontent-%COMP%]   .action-area[_ngcontent-%COMP%]{margin-top:40px;display:flex;flex-direction:column;gap:15px;z-index:2}.top-tittle[_ngcontent-%COMP%]{font-family:fantasy;font-size:xxx-large}.btn-primary[_ngcontent-%COMP%], .btn-sec[_ngcontent-%COMP%]{width:100%;padding:18px;border-radius:16px;font-weight:900;text-transform:uppercase;letter-spacing:1px;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;font-size:.9rem}.btn-primary[_ngcontent-%COMP%]:hover, .btn-sec[_ngcontent-%COMP%]:hover{transform:translateY(-2px);filter:brightness(1.1)}.btn-primary[_ngcontent-%COMP%]:active, .btn-sec[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-primary[_ngcontent-%COMP%]{background:var(--ion-color-primary);color:var(--ion-color-primary-contrast);box-shadow:0 4px 15px rgba(var(--ion-color-primary-rgb),.3)}.btn-sec[_ngcontent-%COMP%]{background:#ff3b301a;border:1px solid rgba(255,59,48,.3);color:#ff3b30}.btn-sec[_ngcontent-%COMP%]:hover{background:#ff3b30;color:#fff}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 1100px){.lobby-container[_ngcontent-%COMP%]{flex-direction:column;height:auto}.match-panel[_ngcontent-%COMP%]{order:-1;padding:30px}.results-panel[_ngcontent-%COMP%]{flex:none}}']}))}return a(),o})()}];let B=(()=>{var a;class o{static#n=a=()=>(this.\u0275fac=function(r){return new(r||o)},this.\u0275mod=n.$C({type:o}),this.\u0275inj=l.G2t({imports:[f.iI.forChild(Y),f.iI]}))}return a(),o})();var S=t(554);let X=(()=>{var a;class o{static#n=a=()=>(this.\u0275fac=function(r){return new(r||o)},this.\u0275mod=n.$C({type:o}),this.\u0275inj=l.G2t({imports:[p.MD,M.YN,m.bv,B,C.HB,S.G]}))}return a(),o})()}}]);